[Unit]
Description=Kafka data volumes
Requires=docker.service
After=docker.service
Wants=logspout.service
After=logspout.service

[Service]
Type=oneshot
RemainAfterExit=yes
Environment="TAG=0.8.1.1"

TimeoutStartSec=0
ExecStartPre=-/usr/bin/docker pull nordstrom/kafka:${TAG}
ExecStartPre=-/usr/bin/docker run \
  --net none \
  --name kafka-data-%i \
  --volume /kafka/data \
    nordstrom/kafka:${TAG} \
      /usr/bin/printf "Kafka data volumes container started\n"

ExecStart=/usr/bin/printf "Kafka data volumes available\n"

[X-Fleet]
Conflicts=%p@*.service

[Install]
WantedBy=multi-user.target
